<!DOCTYPE html>
<html>
<head>
	<title>CSS魔方</title>
	<meta name="author" content="ChenLiang">
	<meta charset="utf-8">
	<script type="text/javascript" src='js/jquery-3.0.0.min.js'></script>
	<link rel="stylesheet" type="text/css" href="css/cube.css">
</head>
<body>
<div class="stage">
	<div class="magicBox" id='MagicBox'>
		<div class="box frontBox">
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
		</div>
		<div class="box middleBox">
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
		</div>
		<div class="box backBox">
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
			<div class="cube">
				<div class="front style"></div>
				<div class="back style"></div>
				<div class="left style"></div>
				<div class="right style"></div>
				<div class="top style"></div>
				<div class="bottom style"></div>
			</div>
		</div>
	</div>
	<div class="btn">
		<button id="go">动起来</button>
		<button id="stop" style="background: #f00;border-color: #f00">静下来</button>
	</div>
	
</div>

</body>
<script type="text/javascript">
	$('.magicBox').css({
		'transform': 'rotateX(45deg) rotateY(-45deg)',
	})

	var downFlag=false;
	var mouse={};
	var deg={};
	document.onmousedown=function(e){
		downFlag=true;
		mouse.downX=e.clientX;
		mouse.downY=e.clientY;
		deg.downDegX=parseFloat(document.getElementById('MagicBox').style.webkitTransform.match(/rotateX\((.*?)\)/)[1]);
		deg.downDegY=parseFloat(document.getElementById('MagicBox').style.webkitTransform.match(/rotateY\((.*?)\)/)[1]);
	}
	document.onmouseup=function(){
		downFlag=false;
	}
	document.onmousemove=function(e){
		mouse.moveX=e.clientX;
		mouse.moveY=e.clientY;
		if(downFlag){
			$('.magicBox').css({
				'-webkit-transform': 'rotateX('+(deg.downDegX-(mouse.moveY-mouse.downY))+'deg) rotateY('+(deg.downDegY-(mouse.downX-mouse.moveX))+'deg)',
			})
		}
	}

	$('#go').on('click',function(){
		$('.frontBox').addClass('moveFront');
		$('.middleBox').addClass('moveMiddle');
		$('.backBox').addClass('moveBack');
	})
	$('#stop').on('click',function(){
		$('.frontBox').removeClass('moveFront');
		$('.middleBox').removeClass('moveMiddle');
		$('.backBox').removeClass('moveBack');
	})
</script>
</html>